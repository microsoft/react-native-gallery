schedules:
  - cron: '0 0 * * *'
    displayName: Nightly Build
    branches:
      include:
        - main
        - cm-ci-test
    batch: true

variables:
  - group: rngallery_Variables
  - name: BuildLogDirectory
    value: $(Build.BinariesDirectory)\x64\BuildLogs

pool: rnw-pool-4

steps:
  - checkout: self
    clean: false

  - task: NuGetToolInstaller@0
    inputs:
      versionSpec: '>=5.8.0'

  - task: NodeTool@0
    displayName: Installing Node
    inputs:
      versionSpec: '14.x'

  - template: ./scripts/build.yml
    parameters:
      version: 'current'

  - template: ./scripts/build.yml
    parameters:
      version: 'latest'

  - template: ./scripts/build.yml
    parameters:
      version: 'preview'

  - template: ./scripts/build.yml
    parameters:
      version: 'canary'
